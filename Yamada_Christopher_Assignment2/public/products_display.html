<script>
    let params = (new URL(document.location)).searchParams;
    // if there is an error array then user is alerted
    if (params.has('error')) {
        alert(params.get('error'));
    }
</script>
<!-- Author: Christopher Y. This file displays product store -->
<!-- This page is adapted from a W3 Schools Template: https://www.w3schools.com/w3css/tryw3css_templates_black.htm -->
<!DOCTYPE html>
<html>
<!-- Importing template stylesheets -->
<head>
    <title>Product Display</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Calling for products data -->
    <script src="./products.js" type="text/javascript"></script>
</head>

<!-- Form to submit to server -->
<form action="./purchase" method="POST">

    <body>

        <!-- Header -->
        <header class="w3-container w3-theme w3-padding" id="myHeader">
            <div class="w3-center">
                <h1 class="w3-xxxlarge w3-animate-bottom">Christopher's Mouse Store</h1>
            </div>
        </header>
        <!-- Product Display -->
        <div class="w3-row-padding w3-center w3-margin-top">
            <script>
                // prints out each product display with associated information
                // Code is adapted from personal Invoice 3 WOD
                for (i = 0; i < products.length; i++) {
                    document.write(`
        <div class="w3-third">
            <div class="w3-card w3-container" style="min-height:585px">
                <h3>${products[i].name}</h3><br>
                <img src="${products[i].image}"  width="200px" height="200px">
                <p>Product Description: ${products[i].description}</p>
                <p>Price: $${products[i].price}</p>
                <p>Quantity Available: ${products[i].quantity_available}</p>
                <label for="quantity${i}_label">Quantity Purchasing:</label>
                <input class="w3-input" type="text" placeholder="0" name="quantity${i}" id="quantity${i}_label">
            </div>
        </div>
    `);
                }
            </script>
        </div>
        <!-- Purchase submit button -->
        <div class="w3-center">
            <br>
            <button class="w3-button w3-theme" type="submit" value="Purchase">Purchase</button>
        </div>
</form>


<hr>

<!-- Footer -->
<footer class="w3-center w3-container w3-theme-dark w3-padding-16">
    <h3>Your one stop shop for computer mice!</h3>
</footer>

</body>

</html>